<!DOCTYPE html>
<html lang="en">
<head>
	<%- include('../partials/head'); %>
	<link rel="stylesheet" href="styling/index.css"></link>


</head>
<body class="container">
<header>
	<%- include('../partials/header'); %>
</header>

<main>
	<div class="row">
		<div class="col-sm-8">
		  <div class="jumbotron">
			<h1 style='margin-top: 6%;'>My setting</h1>
			<div class='row'>
				<h3 style='font-weight: bold; margin-left:40%;'>Change your password</h3>
			</div>
			<form action="changePassword" method="post">
			<div class="row">
				<div class="col">
					<div class="mb-3"><label class="form-label la" for="cpassword"><strong>Current password</strong></label><input name='cpassword' class="form-control" type="password" id="cpassword" name="cpassword" maxlength="20" minlength='6' required/></div>
				</div>
				<div class="col">
					<div class="mb-3"><label class="form-label la" for="npassword"><strong>New password</strong></label><input name='npassword' class="form-control" type="password" id="npassword" name="npassword" maxlength="20" minlength='6' required/></div>
				</div>
			</div>
			<br>
			<% if (errorMsg.changeMessage == true) { %>
				<h5 style='font-size: 15px; color:brown !important; text-align: center;'>Password changes successfuly!</h5>	
				<% errorMsg.changeMessage = false %>
			<% } %>
		  	<% if (errorMsg.errorChange == true) { %>
				<h5 style='font-size: 15px; color:brown !important; text-align: center;'>Incorrect password<br>The password has not been changed!</h5>	
				<% errorMsg.errorChange = false %>
			<% } %>
				<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" onclick='changeMessage()' id='changep' type="submit">Change</button>
			</form>			
			<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" id='open' onclick="popupp()" style='width: 30%;' type="submit">Delete my account</button>
			<!-- The Modal -->
				<div id="deleteAccount" class="modal">
					<!-- Modal content -->
					<div class="modal-content">
						<span class="close" onclick='closep()'>&times;</span>
						<h2>Are you sure that you want to delete your account?</h2>
						<br>
						<form action="deleteAccount" method="post">
							<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" id='yes' type="submit">Yes</button>
						</form>
						<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" id='no' onclick="closep()" type="submit">No</button>

					</div>
				</div>
		  </div>
		</div>
		<%- include('../partials/sidebar'); %>
	  </div>

<style>
	.la{
		padding-left: 40% !important;
	}
	#changep, #open, #yes, #no{
		width: 22%;
		height: 40px;
		margin: 10px auto;
		justify-content: center;
		display: block;
		color: #fff;
		background: #573b8a;
		font-size: 2rem;
		font-weight: bold;
		margin-top: 15px;
		outline: none;
		border: none;
		border-radius: 10px;
		transition: .2s ease-in;
		cursor: pointer;
	}
	#changep:hover, #open:hover{
		background: #6d44b8;
	
	}
	main .modal-content {
		margin:  auto;
		margin-top: 10%;
		padding-right: 30px;
		padding: 20px;
		/*border: 1px solid #888;*/
		width: 60%;
		text-align: center;
		font-size: 22px;
		
	}
	main .close {
		text-align: right;
		width: 15px;
		color: black;
		float: right;
		font-size: 28px;
		font-weight: bold;
	}

	main .close:hover,
	.close:focus {
		color: black;
		text-decoration: none;
		cursor: pointer;
	}


</style>	
<script>
	function popupp() {
   document.getElementById('deleteAccount').style.display ='block';
   };

   // When the user clicks on <span> (x), close the modal
   function closep() {
   document.getElementById('deleteAccount').style.display = 'none';
   };
   
</script>
</main>
<footer>
	<%- include('../partials/footer'); %>
</footer>
  
</body>
</html>